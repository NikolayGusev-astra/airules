#!/bin/bash
# init.sh - Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Architect Skill

set -e

echo "ðŸ›ï¸  Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Architect Skill Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ..."

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
if [ -f "package.json" ]; then
  echo "ðŸ“¦ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹..."
  npm install
else
  echo "âš ï¸  package.json Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½. ÐŸÑ€Ð¾Ð¿ÑƒÑÐº ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹."
fi

# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ñ… Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹ Ð´Ð»Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ñ… Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚Ð¾Ð²
echo "ðŸ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹..."
mkdir -p docs
mkdir -p docs/plans
mkdir -p docs/specs
mkdir -p docs/architecture
mkdir -p tests
mkdir -p e2e
mkdir -p reports
mkdir -p coverage

# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð° TODO Ð´Ð»Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ñ… Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹
echo "ðŸ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð° Ð´Ð»Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ñ… Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹..."
cat > docs/ARCHITECTURAL_DECISIONS.md << 'EOF'
# ðŸ›ï¸ ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ

Ð­Ñ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð» ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ Ð¸ Ð¸Ñ… Ð¾Ð±Ð¾ÑÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ.

## Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð·Ð°Ð¿Ð¸ÑÐ¸

```markdown
### ADR-001: ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ
**Ð”Ð°Ñ‚Ð°:** YYYY-MM-DD
**Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¾ / ÐŸÑ€Ð¸Ð½ÑÑ‚Ð¾ / ÐžÑ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¾
**ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚:** ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ð¸Ð»Ð¸ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ñ
**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** ÐŸÑ€ÐµÐ´Ð»Ð°Ð³Ð°ÐµÐ¼Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ
**ÐŸÐ¾ÑÐ»ÐµÐ´ÑÑ‚Ð²Ð¸Ñ:** ÐŸÐ»ÑŽÑÑ‹ Ð¸ Ð¼Ð¸Ð½ÑƒÑÑ‹
```

## Ð—Ð°Ð¿Ð¸ÑÐ¸ Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹

(Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐ¹Ñ‚Ðµ ÑÑŽÐ´Ð° Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ Ð¿Ð¾ Ð¼ÐµÑ€Ðµ Ð¸Ñ… Ð¿Ñ€Ð¸Ð½ÑÑ‚Ð¸Ñ)
EOF

# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑˆÐ°Ð±Ð»Ð¾Ð½Ð° TASK_SPEC.md
echo "ðŸ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑˆÐ°Ð±Ð»Ð¾Ð½Ð° TASK_SPEC.md..."
cat > docs/TASK_SPEC_TEMPLATE.md << 'EOF'
# Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð—Ð°Ð´Ð°Ð½Ð¸Ðµ: [ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ]

## Ð¦ÐµÐ»ÑŒ
[Ð§Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ð¼ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ]

## ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚ Ð¸Ð· IMPLEMENTATION_PLAN.md
[Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½ÑƒÑŽ Ñ„Ð°Ð·Ñƒ/Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ð¸Ð· Ð¿Ð»Ð°Ð½Ð°]

## Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ (STRICT)
- Backend: Ð¢ÐžÐ›Ð¬ÐšÐž Node.js. Python ÐšÐÐ¢Ð•Ð“ÐžÐ Ð˜Ð§Ð•Ð¡ÐšÐ˜ Ð—ÐÐŸÐ Ð•Ð©Ð•Ð.
- Database: Ð¢ÐžÐ›Ð¬ÐšÐž NUMERIC(15,2). Float/Double Ð—ÐÐŸÐ Ð•Ð©Ð•ÐÐ«.
- Parser: Ð¢ÐžÐ›Ð¬ÐšÐž exceljs (Node.js Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°).

## ÐŸÑ€Ð°Ð²Ð¸Ð»Ð° Ð´Ð¾Ð¼ÐµÐ½Ð° ({DOMAIN})
- Ð¡Ð¼. docs/{DOMAIN_RULES}.md
- [Ð£ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÑÐ¿ÐµÑ†Ð¸Ñ„Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð° Ð´Ð¾Ð¼ÐµÐ½Ð°]

## TDD (Test-First Development)
- Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ ÐºÐ°ÐºÐ¸Ðµ Ñ‚ÐµÑÑ‚Ñ‹ Ð½ÑƒÐ¶Ð½Ñ‹ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸
- ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñ‚Ðµ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ðµ Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ (>80%)
- Ð¡Ð²ÑÐ¶Ð¸Ñ‚Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ Ñ TODO-ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸ÑÐ¼Ð¸ Ð² ÐºÐ¾Ð´Ðµ

## ÐŸÐ»Ð°Ð½ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸
1. [Ð¨Ð°Ð³ 1 - MVP]
2. [Ð¨Ð°Ð³ 2 - Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ]

## ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚7 Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ
- [ ] Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ Ð²ÐµÑ€Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ Ñ‡ÐµÑ€ÐµÐ· Context7
- [ ] Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ ÑƒÐºÐ°Ð·Ð°Ð½Ñ‹

---
EOF

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
echo "âš™ï¸  ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸..."
if [ -f "config.json" ] || [ -f ".skill.json" ]; then
  echo "âœ… ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð½Ð°Ð¹Ð´ÐµÐ½Ð°"
else
  echo "âš ï¸  ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð°. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ config.json Ð¸Ð»Ð¸ .skill.json"
fi

# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ README Ð´Ð»Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸
echo "ðŸ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ README Ð´Ð»Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ð¾Ð¹ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸..."
cat > docs/README.md << 'EOF'
# ðŸ›ï¸ ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ

Ð­Ñ‚Ð° Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ðµ Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚Ñ‹, ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ðµ Architect Skill.

## Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°

- `plans/` â€” ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ðµ Ð¿Ð»Ð°Ð½Ñ‹ Ð¸ Ð´Ð¸Ð·Ð°Ð¹Ð½Ñ‹
- `specs/` â€” Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ¿ÐµÑ†Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸ (TASK_SPEC.md)
- `architecture/` â€” Ð”Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ñ‹ Ð¸ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ðµ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹
- `ARCHITECTURAL_DECISIONS.md` â€” Ð—Ð°Ð¿Ð¸ÑÐ¸ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ñ… Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹ (ADR)
- `TASK_SPEC_TEMPLATE.md` â€” Ð¨Ð°Ð±Ð»Ð¾Ð½ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð¢Ð—

## Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

1. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ð»Ð°Ð½ Ð² `plans/`
2. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ `TASK_SPEC_TEMPLATE.md` ÐºÐ°Ðº Ð¾ÑÐ½Ð¾Ð²Ñƒ Ð´Ð»Ñ Ð¢Ð—
3. Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°Ð¹Ñ‚Ðµ Ð²Ð°Ð¶Ð½Ñ‹Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ Ð² `ARCHITECTURAL_DECISIONS.md`
4. Ð¥Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ð´Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ñ‹ Ð² `architecture/`

## Ð¨Ð°Ð±Ð»Ð¾Ð½Ñ‹

Ð”Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð½Ð°Ñ‡Ð°Ð»Ð°:
```bash
cp docs/TASK_SPEC_TEMPLATE.md docs/specs/my-task.md
```
EOF

echo "âœ… Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°!"
echo ""
echo "Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÑˆÐ°Ð³Ð¸:"
echo "1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ SKILL.md Ð´Ð»Ñ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¹"
echo "2. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ./scripts/validate.sh Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸"
echo "3. ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ðµ Ð¿Ð»Ð°Ð½Ñ‹"
echo ""
echo "ðŸ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ñ‹ Ñ„Ð°Ð¹Ð»Ñ‹:"
echo "- docs/ARCHITECTURAL_DECISIONS.md"
echo "- docs/TASK_SPEC_TEMPLATE.md"
echo "- docs/README.md"